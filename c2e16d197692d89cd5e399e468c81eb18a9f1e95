---
type: learnings
timestamp: '2025-12-27T15:41:14.086136+00:00'
summary: Telemetry pipeline works correctly but metrics appear empty until hooks execute
---

Telemetry pipeline works correctly but metrics appear empty until hooks execute
## Summary
The OTLP telemetry pipeline is fully functional. Metrics were appearing empty because few hooks had executed, not due to a configuration issue.

## Key Insights
- OTLP export from hooks works (http://localhost:4318)
- OTEL collector forwards to Prometheus via remote write
- Prometheus scrape interval is 15s - must wait for fresh data
- Metrics persist across hook invocations via ~/.local/share/memory-plugin/metrics_state.json
- Grafana dashboards are pre-configured at http://localhost:3000

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:329-387 (timed_hook_execution context manager)
- src/git_notes_memory/observability/exporters/otlp.py:152-566 (OTLPExporter)
- src/git_notes_memory/observability/persistent_metrics.py:1-150 (persistence layer)

---
type: learnings
timestamp: '2025-12-27T15:44:25.475760+00:00'
summary: '▶ learned ─────────────────────────────────────

  Telemetry pipeline works correctly but metrics ap...'
tags:
- auto-captured
- pre-compact
---

Telemetry pipeline works correctly but metrics appear empty until hooks execute
## Summary
The OTLP telemetry pipeline is fully functional. Metrics were appearing empty because few hooks had executed, not due to a configuration issue.

## Key Insights
- OTLP export from hooks works (http://localhost:4318)
- OTEL collector forwards to Prometheus via remote write
- Prometheus scrape interval is 15s - must wait for fresh data
- Metrics persist across hook invocations via ~/.local/share/memory-plugin/metrics_state.json
- Grafana dashboards are pre-configured at http://localhost:3000

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:329-387 (timed_hook_execution context manager)
- src/git_notes_memory/observability/exporters/otlp.py:152-566 (OTLPExporter)
- src/git_notes_memory/observability/persistent_metrics.py:1-150 (persistence layer)

---
type: learnings
timestamp: '2025-12-27T15:44:25.823591+00:00'
summary: '▶ learned ─────────────────────────────────────

  Memory blocks in Claude responses are output guid...'
tags:
- auto-captured
- pre-compact
---

Memory blocks in Claude responses are output guidance, not automatic captures
## Summary
The `▶ namespace` blocks Claude outputs are structured guidance for review - they don't automatically trigger memory capture or telemetry. Actual capture happens through explicit commands, hooks at session end, or the implicit capture agent.

## Key Points
- `▶ progress/decision/learned` blocks = formatting for human review
- Telemetry fires on: `/memory:capture`, Stop hook, implicit agent
- OTEL pipeline verified working: test metric appeared in Prometheus
- Dashboard queries now use correct `memory_*` prefixed metric names

## Related Files
- src/git_notes_memory/hooks/stop_handler.py (session-end capture)
- src/git_notes_memory/subconsciousness/implicit_capture_agent.py (LLM extraction)

---
type: learnings
timestamp: '2025-12-27T15:54:00.648510+00:00'
summary: '▶ learned ─────────────────────────────────────

  Telemetry pipeline works correctly but metrics ap...'
tags:
- auto-captured
- pre-compact
---

Telemetry pipeline works correctly but metrics appear empty until hooks execute
## Summary
The OTLP telemetry pipeline is fully functional. Metrics were appearing empty because few hooks had executed, not due to a configuration issue.

## Key Insights
- OTLP export from hooks works (http://localhost:4318)
- OTEL collector forwards to Prometheus via remote write
- Prometheus scrape interval is 15s - must wait for fresh data
- Metrics persist across hook invocations via ~/.local/share/memory-plugin/metrics_state.json
- Grafana dashboards are pre-configured at http://localhost:3000

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:329-387 (timed_hook_execution context manager)
- src/git_notes_memory/observability/exporters/otlp.py:152-566 (OTLPExporter)
- src/git_notes_memory/observability/persistent_metrics.py:1-150 (persistence layer)

---
type: learnings
timestamp: '2025-12-27T15:54:00.973155+00:00'
summary: '▶ learned ─────────────────────────────────────

  Memory blocks in Claude responses are output guid...'
tags:
- auto-captured
- pre-compact
---

Memory blocks in Claude responses are output guidance, not automatic captures
## Summary
The `▶ namespace` blocks Claude outputs are structured guidance for review - they don't automatically trigger memory capture or telemetry. Actual capture happens through explicit commands, hooks at session end, or the implicit capture agent.

## Key Points
- `▶ progress/decision/learned` blocks = formatting for human review
- Telemetry fires on: `/memory:capture`, Stop hook, implicit agent
- OTEL pipeline verified working: test metric appeared in Prometheus
- Dashboard queries now use correct `memory_*` prefixed metric names

## Related Files
- src/git_notes_memory/hooks/stop_handler.py (session-end capture)
- src/git_notes_memory/subconsciousness/implicit_capture_agent.py (LLM extraction)

---
type: learnings
timestamp: '2025-12-27T16:05:51.759191+00:00'
summary: '▶ learned ─────────────────────────────────────

  Telemetry pipeline works correctly but metrics ap...'
tags:
- auto-captured
- pre-compact
---

Telemetry pipeline works correctly but metrics appear empty until hooks execute
## Summary
The OTLP telemetry pipeline is fully functional. Metrics were appearing empty because few hooks had executed, not due to a configuration issue.

## Key Insights
- OTLP export from hooks works (http://localhost:4318)
- OTEL collector forwards to Prometheus via remote write
- Prometheus scrape interval is 15s - must wait for fresh data
- Metrics persist across hook invocations via ~/.local/share/memory-plugin/metrics_state.json
- Grafana dashboards are pre-configured at http://localhost:3000

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:329-387 (timed_hook_execution context manager)
- src/git_notes_memory/observability/exporters/otlp.py:152-566 (OTLPExporter)
- src/git_notes_memory/observability/persistent_metrics.py:1-150 (persistence layer)

---
type: learnings
timestamp: '2025-12-27T16:05:52.095743+00:00'
summary: '▶ learned ─────────────────────────────────────

  Memory blocks in Claude responses are output guid...'
tags:
- auto-captured
- pre-compact
---

Memory blocks in Claude responses are output guidance, not automatic captures
## Summary
The `▶ namespace` blocks Claude outputs are structured guidance for review - they don't automatically trigger memory capture or telemetry. Actual capture happens through explicit commands, hooks at session end, or the implicit capture agent.

## Key Points
- `▶ progress/decision/learned` blocks = formatting for human review
- Telemetry fires on: `/memory:capture`, Stop hook, implicit agent
- OTEL pipeline verified working: test metric appeared in Prometheus
- Dashboard queries now use correct `memory_*` prefixed metric names

## Related Files
- src/git_notes_memory/hooks/stop_handler.py (session-end capture)
- src/git_notes_memory/subconsciousness/implicit_capture_agent.py (LLM extraction)

---
type: learnings
timestamp: '2025-12-27T16:19:29.189836+00:00'
summary: '▶ learned ─────────────────────────────────────

  Telemetry pipeline works correctly but metrics ap...'
tags:
- auto-captured
- pre-compact
---

Telemetry pipeline works correctly but metrics appear empty until hooks execute
## Summary
The OTLP telemetry pipeline is fully functional. Metrics were appearing empty because few hooks had executed, not due to a configuration issue.

## Key Insights
- OTLP export from hooks works (http://localhost:4318)
- OTEL collector forwards to Prometheus via remote write
- Prometheus scrape interval is 15s - must wait for fresh data
- Metrics persist across hook invocations via ~/.local/share/memory-plugin/metrics_state.json
- Grafana dashboards are pre-configured at http://localhost:3000

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:329-387 (timed_hook_execution context manager)
- src/git_notes_memory/observability/exporters/otlp.py:152-566 (OTLPExporter)
- src/git_notes_memory/observability/persistent_metrics.py:1-150 (persistence layer)

---
type: learnings
timestamp: '2025-12-27T16:19:29.530158+00:00'
summary: '▶ learned ─────────────────────────────────────

  Memory blocks in Claude responses are output guid...'
tags:
- auto-captured
- pre-compact
---

Memory blocks in Claude responses are output guidance, not automatic captures
## Summary
The `▶ namespace` blocks Claude outputs are structured guidance for review - they don't automatically trigger memory capture or telemetry. Actual capture happens through explicit commands, hooks at session end, or the implicit capture agent.

## Key Points
- `▶ progress/decision/learned` blocks = formatting for human review
- Telemetry fires on: `/memory:capture`, Stop hook, implicit agent
- OTEL pipeline verified working: test metric appeared in Prometheus
- Dashboard queries now use correct `memory_*` prefixed metric names

## Related Files
- src/git_notes_memory/hooks/stop_handler.py (session-end capture)
- src/git_notes_memory/subconsciousness/implicit_capture_agent.py (LLM extraction)

---
type: learnings
timestamp: '2025-12-27T16:34:04.715765+00:00'
summary: '▶ learned ─────────────────────────────────────

  Telemetry pipeline works correctly but metrics ap...'
tags:
- auto-captured
- pre-compact
---

Telemetry pipeline works correctly but metrics appear empty until hooks execute
## Summary
The OTLP telemetry pipeline is fully functional. Metrics were appearing empty because few hooks had executed, not due to a configuration issue.

## Key Insights
- OTLP export from hooks works (http://localhost:4318)
- OTEL collector forwards to Prometheus via remote write
- Prometheus scrape interval is 15s - must wait for fresh data
- Metrics persist across hook invocations via ~/.local/share/memory-plugin/metrics_state.json
- Grafana dashboards are pre-configured at http://localhost:3000

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:329-387 (timed_hook_execution context manager)
- src/git_notes_memory/observability/exporters/otlp.py:152-566 (OTLPExporter)
- src/git_notes_memory/observability/persistent_metrics.py:1-150 (persistence layer)

---
type: learnings
timestamp: '2025-12-27T16:34:05.025265+00:00'
summary: '▶ learned ─────────────────────────────────────

  Memory blocks in Claude responses are output guid...'
tags:
- auto-captured
- pre-compact
---

Memory blocks in Claude responses are output guidance, not automatic captures
## Summary
The `▶ namespace` blocks Claude outputs are structured guidance for review - they don't automatically trigger memory capture or telemetry. Actual capture happens through explicit commands, hooks at session end, or the implicit capture agent.

## Key Points
- `▶ progress/decision/learned` blocks = formatting for human review
- Telemetry fires on: `/memory:capture`, Stop hook, implicit agent
- OTEL pipeline verified working: test metric appeared in Prometheus
- Dashboard queries now use correct `memory_*` prefixed metric names

## Related Files
- src/git_notes_memory/hooks/stop_handler.py (session-end capture)
- src/git_notes_memory/subconsciousness/implicit_capture_agent.py (LLM extraction)

---
type: learnings
timestamp: '2025-12-27T16:34:05.561307+00:00'
summary: Now I understand the schema structure. For Task 2.5, I need to extend the
  index schema to support...
tags:
- auto-captured
- pre-compact
---

Now I understand the schema structure. For Task 2.5, I need to extend the index schema to support consolidation...

---
type: learnings
timestamp: '2025-12-27T16:37:09.828560+00:00'
summary: '...consolidation.'
tags:
- auto-captured
- post-tool-use
- file:retention.py
---

...consolidation.

This module implements the retention scoring algorithm that determines
how important a memory is to keep in the active (hot/warm) tiers.

The retention score is a weighted combination...
