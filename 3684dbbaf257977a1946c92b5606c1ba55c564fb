---
type: decisions
timestamp: '2025-12-21T06:02:24.748126+00:00'
summary: '...memories**: Use markers anywhere in your messages:'
---

...memories**: Use markers anywhere in your messages:
- `[remember] <insight>` - Captures a learning
- `[decision] <choice>` - Captures a decision
- `/memory:capture <namespace> <content>` - Explicit capture

**Available...

---
type: decisions
timestamp: '2025-12-21T06:02:24.773514+00:00'
summary: Git notes as source of truth, SQLite as derived queryable index
---

Git notes as source of truth, SQLite as derived queryable index
## Context
Core architectural decision for the memory storage system. Git notes provide distributed, versioned storage that syncs with code, while SQLite + sqlite-vec provides fast KNN search.

## Rationale
- Git notes are inherently distributed (push/pull with repos)
- Version history comes free with git
- Index can be rebuilt from notes (SyncService.reindex)
- sqlite-vec enables local semantic search without external APIs

## Related Files
- docs/spec/completed/2025-12-18-memory-capture-plugin/ARCHITECTURE.md:85-91
- src/git_notes_memory/git_ops.py:1-50
- src/git_notes_memory/sync.py:1-50

---
type: decisions
timestamp: '2025-12-21T06:02:24.796807+00:00'
summary: Lazy loading via __getattr__ to avoid embedding model import penalty
---

Lazy loading via __getattr__ to avoid embedding model import penalty
## Context
The sentence-transformers embedding model adds 2-3 seconds to import time. SessionStart hooks must complete quickly (<5s) to avoid blocking Claude Code sessions.

## Rationale
- Defer all expensive imports until first use
- Factory functions (`get_capture_service()`) create singletons lazily
- Direct SQLite queries in session_start_handler avoid full IndexService initialization

## Related Files
- src/git_notes_memory/__init__.py:27-85
- src/git_notes_memory/hooks/session_start_handler.py:66-89
