---
type: patterns
timestamp: '2025-12-26T21:08:07.036918+00:00'
summary: '...git notes sync: %s", e)'
tags:
- auto-captured
- post-tool-use
- file:session_start_handler.py
---

...git notes sync: %s", e)

            # Migrate from old fetch refspec to new tracking refs pattern
            # This is idempotent and safe to call every session
            if git_ops is not...

---
type: patterns
timestamp: '2025-12-26T23:28:58.298773+00:00'
summary: '...bucket_counts", None)'
tags:
- auto-captured
- post-tool-use
- file:persistent_metrics.py
---

...bucket_counts", None)
            entry.pop("percentiles", None)

    try:
        # Use atomic write pattern: write to temp, then rename
        temp_file = METRICS_FILE.with_suffix(".tmp")

        with...

---
type: patterns
timestamp: '2025-12-27T01:11:56.464717+00:00'
summary: '...bucket_counts", None)'
tags:
- auto-captured
- post-tool-use
- file:persistent_metrics.py
---

...bucket_counts", None)
            entry.pop("percentiles", None)

    try:
        # Use atomic write pattern: write to temp, then rename
        temp_file = metrics_file.with_suffix(".tmp")

        with...

---
type: patterns
timestamp: '2025-12-27T12:56:07.658359+00:00'
summary: '...High value: Actionable retrospective items with clear improvement paths'
tags:
- auto-captured
- post-tool-use
- file:prompts.py
---

...High value: Actionable retrospective items with clear improvement paths

10. **patterns**: Reusable approaches, techniques, or solutions
    - Look for: "whenever we X, we should Y", repeated...

---
type: patterns
timestamp: '2025-12-27T15:21:33.045700+00:00'
summary: '...| None) -> tuple[str, bool]:'
tags:
- auto-captured
- post-tool-use
- file:ARCHITECTURE.md
---

...| None) -> tuple[str, bool]:
        if not context:
            return "", False
        pattern = rf"<memory_consolidated_summaries.*?>.*?</memory_consolidated_summaries>"
        cleaned,...

---
type: patterns
timestamp: '2025-12-27T15:21:33.074413+00:00'
summary: '...= ['
tags:
- auto-captured
- post-tool-use
- file:ARCHITECTURE.md
---

...= [
    "scikit-learn>=1.3",
    "openai>=1.0",
    "httpx>=0.25",
]
```

### Lazy Import Pattern

```python
def get_consolidation_service() -> ConsolidationService:
    try:
        from .consolidation...

---
type: patterns
timestamp: '2025-12-27T15:21:33.100218+00:00'
summary: '...Reasoning Flow'
tags:
- auto-captured
- post-tool-use
- file:ARCHITECTURE.md
---

...Reasoning Flow

```
1. Query received (e.g., "When did X happen?")
2. Check if reasoning needed (pattern match or --reason flag)
3. Retrieve memories with RecallService
4. Format memories with explicit...

---
type: patterns
timestamp: '2025-12-27T15:25:24.594418+00:00'
summary: '...pyproject.toml`)'
tags:
- auto-captured
- post-tool-use
- file:IMPLEMENTATION_PLAN.md
---

...pyproject.toml`)
- [ ] 6.5.1 Add `[consolidation]` optional dependencies
- [ ] 6.5.2 Implement lazy import pattern for consolidation module
- [ ] 6.5.3 Implement `NotImplementedError` with helpful message
-...
