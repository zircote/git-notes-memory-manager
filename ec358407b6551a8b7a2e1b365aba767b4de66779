---
type: blockers
timestamp: '2025-12-26T21:03:08.149018+00:00'
summary: Hooks collect metrics but don't push them to OTLP
---

Hooks collect metrics but don't push them to OTLP
## Root Cause
The `timed_hook_execution` context manager at line 293-357:
1. ✓ Collects metrics via `metrics.increment()` and `metrics.observe()`
2. ✗ Does NOT call `export_metrics_if_configured()` to push to OTLP

Only `stop_handler.py` pushes metrics. Other hooks (SessionStart, UserPromptSubmit, PostToolUse) collect but never export.

## Impact
- Hook metrics exist in Prometheus label index (from historical pushes)
- Current hook executions produce no data points
- Dashboard shows empty panels

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:334-357 (missing export call)

---
type: blockers
timestamp: '2025-12-26T21:08:39.715052+00:00'
summary: '▶ blocker ─────────────────────────────────────

  Hooks collect metrics but don''t push them to OTLP...'
tags:
- auto-captured
- pre-compact
---

Hooks collect metrics but don't push them to OTLP
## Root Cause
The `timed_hook_execution` context manager at line 293-357:
1. ✓ Collects metrics via `metrics.increment()` and `metrics.observe()`
2. ✗ Does NOT call `export_metrics_if_configured()` to push to OTLP

Only `stop_handler.py` pushes metrics. Other hooks (SessionStart, UserPromptSubmit, PostToolUse) collect but never export.

## Impact
- Hook metrics exist in Prometheus label index (from historical pushes)
- Current hook executions produce no data points
- Dashboard shows empty panels

## Related Files
- src/git_notes_memory/hooks/hook_utils.py:334-357 (missing export call)

---
type: blockers
timestamp: '2025-12-26T21:08:39.798898+00:00'
summary: '▶ blocker ─────────────────────────────────────

  3 of 5 hook handlers lack metrics instrumentation...'
tags:
- auto-captured
- pre-compact
---

3 of 5 hook handlers lack metrics instrumentation
## Summary
Only `post_tool_use_handler.py` and `pre_compact_handler.py` use `timed_hook_execution`. These handlers are missing it:
- `session_start_handler.py`
- `stop_handler.py`
- `user_prompt_handler.py`

## Impact
SessionStart and UserPromptSubmit hooks fire but produce no metrics.

## Related Files
- src/git_notes_memory/hooks/session_start_handler.py
- src/git_notes_memory/hooks/stop_handler.py
- src/git_notes_memory/hooks/user_prompt_handler.py
